databaseChangeLog:
  - changeSet:
      id: 02_create_table_operation_log
      author: dipdeepcode
      preConditions:
        - onFail: MARK_RAN
          not:
            - tableExists:
                tableName: operation_log
      changes:
        - sql:
            sql: 'CREATE TABLE operation_log
                  (
                      id                  BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
                      customer_id         BIGINT                                  NOT NULL,
                      operation_code      VARCHAR(255)                            NOT NULL,
                      operation_timestamp TIMESTAMP WITH TIME ZONE                NOT NULL,
                      CONSTRAINT pk_operation_log PRIMARY KEY (id)
                  );'
  - changeSet:
      id: 03_create_fk_operation_log_on_customer
      author: dipdeepcode
      preConditions:
        - onFail: MARK_RAN
          not:
            - foreignKeyConstraintExists:
                foreignKeyName: fk_operation_log_on_customer
      changes:
        - sql:
            sql: 'ALTER TABLE operation_log
                      ADD CONSTRAINT fk_operation_log_on_customer FOREIGN KEY (customer_id) REFERENCES customer (id);'